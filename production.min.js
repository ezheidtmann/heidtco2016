!function(a){function b(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}}function c(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})}function d(b,c){var d={rsvp:"yes"===b.find("[name=rsvp]").val(),email:b.find("[name=email]").val(),details:b.find("[name=details]").val()};void 0!==c&&a.extend(d,c);var h={url:"/api/rsvp/"+f,method:"PUT",data:JSON.stringify(d),dataType:"json",headers:{"X-Heidtco-Client-Id":e,"Content-type":"application/json"}};return g=g.done(function(){return a.ajax(h)})}var e=localStorage.getItem("client_id");null===e&&(e=c(),localStorage.setItem("client_id",e));var f=c(),g=a.Deferred().resolve();a(document).on("click",".rsvp-yes",function(b){a(".rsvp .buttons").hide(),a("form.yes").show()}),a(document).on("click",".rsvp-regrets",function(b){a(".rsvp .buttons").hide(),a("form.regrets").show()}),a(document).on("change keydown","form[ajax-rsvp]",b(function(b){d(a(this),{status:"in-progress"}).done(function(a,b,c){console.log("saved rsvp in progress",f)})},3e3)),a(document).on("submit","form[ajax-rsvp]",function(b){b.preventDefault();var e=a(this);d(e,{status:"complete"}).done(function(a,b,c){console.log("saved rsvp complete",f)}),f=c(),e.addClass("done").one("transitionend",function(){e.next(".thanks").addClass("show")})})}(jQuery);
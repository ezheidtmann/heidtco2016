!function(a){function b(a){var b=null;if(document.cookie&&""!=document.cookie)for(var c=document.cookie.split(";"),d=0;d<c.length;d++){var e=jQuery.trim(c[d]);if(e.substring(0,a.length+1)==a+"="){b=decodeURIComponent(e.substring(a.length+1));break}}return b}function c(a){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(a)}function d(a){var b=document.location.host,c=document.location.protocol,d="//"+b,e=c+d;return a==e||a.slice(0,e.length+1)==e+"/"||a==d||a.slice(0,d.length+1)==d+"/"||!/^(\/\/|http:|https:).*/.test(a)}function e(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}}function f(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})}function g(b,c){var d={rsvp:"yes"===b.find("[name=rsvp]").val(),email:b.find("[name=email]").val(),details:b.find("[name=details]").val()};void 0!==c&&a.extend(d,c);var e={url:"/api/rsvp/"+j,method:"PUT",data:JSON.stringify(d),dataType:"json",headers:{"X-Heidtco-Client-Id":i,"Content-type":"application/json"}};return k=k.done(function(){return a.ajax(e)})}var h=b("csrftoken");a.ajaxSetup({beforeSend:function(a,b){!c(b.type)&&d(b.url)&&a.setRequestHeader("X-CSRFToken",h)}});var i=localStorage.getItem("client_id");null===i&&(i=f(),localStorage.setItem("client_id",i));var j=f(),k=a.Deferred().resolve();a(document).on("click",".rsvp-yes",function(b){a(".rsvp .buttons").hide(),a("form.yes").show()}),a(document).on("click",".rsvp-regrets",function(b){a(".rsvp .buttons").hide(),a("form.regrets").show()}),a(document).on("change keydown","form[ajax-rsvp]",e(function(b){g(a(this),{status:"in-progress"}).done(function(a,b,c){console.log("saved rsvp in progress",j)})},3e3)),a(document).on("submit","form[ajax-rsvp]",function(b){b.preventDefault();var c=a(this);c.find("[type=submit]").prop("disabled",!0),g(c,{status:"complete"}).done(function(a,b,d){console.log("saved rsvp complete",j),c.addClass("done").one("transitionend",function(){c.next(".thanks").addClass("show")}),c.get(0).scrollIntoView()}),j=f()})}(jQuery);